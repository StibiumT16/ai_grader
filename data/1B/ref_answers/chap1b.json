{
  "1.25": {
    "problem": "设$n, r$是正整数，令$S$是由$\\left\\{ 1, 2, \\cdots, n \\right\\}$的全体$r$元子集构成的集合，证明：\\begin{equation*}\\sum_{A \\in S} \\min A = \\binom{n + 1}{r + 1}\\end{equation*}",
    "answers": {
      "(1)": [
        {
          "answer": "$\\min A = k$且满足$A \\in S$的数量为$\\binom{n-k}{r-1}$ 考察$r$元子集$A$中第二小的元素，假设为$k+1$，那么$k+1$左侧的一个元素有$k$种选择，$k+1$右侧的元素有$\\binom{(n+1)-(k+1)}{r-1}=\\binom{n-k}{r-1}$种选择，因此$\\binom{n+1}{r+1} = \\sum_{k=1}^{n-r+1} \\binom{n-k}{r-1}$ 实际上只是用一个经典组合恒等式$\\binom{n+1}{r+1} = \\sum_{k=m}^{n-r+m}\\binom{k}{m}\\binom{n-k}{r-m}$的$m=1$的特殊形式",
          "rules": [
            {
              "rule": "$\\min A = k$且满足$A \\in S$的数量为$\\binom{n-k}{r-1}$",
              "score": 5
            },
            {
              "rule": "考察$r$元子集$A$中第二小的元素，假设为$k+1$，那么$k+1$左侧的一个元素有$k$种选择，$k+1$右侧的元素有$\\binom{(n+1)-(k+1)}{r-1}=\\binom{n-k}{r-1}$种选择，因此$\\binom{n+1}{r+1} = \\sum_{k=1}^{n-r+1} \\binom{n-k}{r-1}$",
              "score": 5
            }
          ]
        }
      ]
    }
  },
  "1.26": {
    "problem": "对26个小写英文字母作全排列，要求单词 dog 出现在排列中，并且字母p在字母q前面、dog在p和q之间，求满足上述条件的的排列方案数。",
    "answers": {
      "(1)": [
        {
          "answer": "假设$p$左边有$x_1$个字母，$p$和$dog$之间有$x_2$个字母，$dog$和$q$之间有$x_3$个字母，$q$右边有$x_4$个字母，因此我们可以得到不定方程$x_1 + x_2 + x_3 + x_4 = 21, x_i\\geq 0,i = 1,2,3,4$ 根据不定方程非负解的个数可得有$\\binom{21+4-1}{4-1} = \\binom{24}{3}$ 剩下21个位置的排列共有$21!$种 两者独立，根据乘法原理，总的排列数是：$\\binom{24}{3}\\times 21! = \\frac{24!}{3!}$",
          "rules": [
            {
              "rule": "假设$p$左边有$x_1$个字母，$p$和$dog$之间有$x_2$个字母，$dog$和$q$之间有$x_3$个字母，$q$右边有$x_4$个字母，因此我们可以得到不定方程$x_1 + x_2 + x_3 + x_4 = 21, x_i\\geq 0,i = 1,2,3,4$",
              "score": 4
            },
            {
              "rule": "根据不定方程非负解的个数可得有$\\binom{21+4-1}{4-1} = \\binom{24}{3}$",
              "score": 2
            },
            {
              "rule": "剩下21个位置的排列共有$21!$种",
              "score": 3
            },
            {
              "rule": "两者独立，根据乘法原理，总的排列数是：$\\binom{24}{3}\\times 21! = \\frac{24!}{3!}$",
              "score": 1
            }
          ]
        }
      ]
    }
  },
  "1.27": {
    "problem": "有100个英文字母，其中a、b、c、d、e各有1个，f、g、h、i、j各有19个。现将这100个字母排成一列，要求字母a、b、c、d、e按照字母表顺序排列，并且a、b之间相隔至少3个字母，b、c之间相隔至少5个字母，c、d之间相隔至少7个字母，d、e之间相隔至少9个字母。求满足上述要求的排列方案数。",
    "answers": {
      "(1)": [
        {
          "answer": "设a左边有x1个字母, a和b中间有x2个字母, b和c中间有x3个字母, c和d之间有x4个字母, d和e之间有x5个字母，e右边有x6个字母。从而根据题目意思列出不定方程: x1+x2+x3+x4+x5+x6=95, x1 >= 0, x2>= 3, x3>= 5, x4>= 7, x5>= 9, x6>= 0。化成标准不定方程的形式x1+(x2-3)+(x3-5)+(x4-7)+(x5-9)+x6=71, x1 >= 0, x2>= 3, x3>= 5, x4>= 7, x5>= 9, x6>= 0。不定方程解的数目为binom{71+6-1}{6-1}=binom{76}{5}。根据多重排列，这95个位置的排列数为95!/(19!)^5。两者独立，根据乘法原理，总的排列数是：binom{76}{5}×95!/(19!)^5。",
          "rules": [
            {
              "rule": "设a左边有x1个字母,a和b中间有x2个字母,b和c中间有x3个字母,c和d之间有x4个字母，d和e之间有x5个字母，e右边有x6个字母，从而根据题目意思列出不定方程:x1+x2+x3+x4+x5+x6=95, x1 >= 0, x2>= 3,x3>= 5, x4>= 7,x5>= 9, x6 >= 0",
              "score": 3
            },
            {
              "rule": "化成标准不定方程的形式x1+(x2-3)+(x3-5)+(x4-7)+(x5-9)+x6=71, x1 >= 0, x2>= 3,x3>= 5, x4>= 7,x5>= 9, x6 >= 0",
              "score": 1
            },
            {
              "rule": "不定方程解的数目为binom{71+6-1}{6-1}=binom{76}{5}",
              "score": 3
            },
            {
              "rule": "根据多重排列，这95个位置的排列数为95!/(19!)^5",
              "score": 2
            },
            {
              "rule": "两者独立，根据乘法原理，总的排列数是：binom{76}{5}×95!/(19!)^5",
              "score": 1
            }
          ]
        }
      ]
    }
  },
  "1.28": {
    "problem": "从不定方程非负整数解数目的视角，证明下列等式成立：\n\\[\\binom{n + m}{m} = \\sum_{k = 0}^{n} \\binom{k + m - 1}{m - 1} \\qquad (n \\geq 0, \\; m \\geq 1)\\]",
    "answers": {
      "(1)": [
        {
          "answer": "考察不定方程x1 + x2 + ... + xm = k, k = 0,1,..., n, xi≥0。此不定方程解的个数为\\(\\sum_{k=0}^{n}\\binom{k+m-1}{m-1}\\)。另一方面，该不定方程包含了所有满足x1+x2+...+xm≤n的非负解，我们引入xm+1=n-\\sum_{r=1}^{m}xi≥0，从而有x1+x2+...+xm+xm+1=n。不定方程的解的个数为\\(\\binom{n+m+1-1}{m+1=1} = \\binom{n+m}{m}\\)。",
          "rules": [
            {
              "rule": "考察不定方程x1 + x2 + ... + xm = k, k = 0,1,..., n, xi≥0",
              "score": 3
            },
            {
              "rule": "上面的方程解的个数为\\(\\sum_{k=0}^{n}\\binom{k+m-1}{m-1}\\)",
              "score": 2
            },
            {
              "rule": "另一方面，该不定方程包含了所有满足x1+x2+...+xm≤n的非负解，我们引入xm+1=n-\\sum_{r=1}^{m}xi≥0，从而有x1+x2+...+xm+xm+1=n",
              "score": 3
            },
            {
              "rule": "不定方程的解的个数为\\(\\binom{n+m+1-1}{m+1=1} = \\binom{n+m}{m}\\)",
              "score": 2
            }
          ]
        }
      ]
    }
  },
  "1.29": {
    "problem": "从$-5, -4, -3, -2, -1, 1, 2, 3, 4$这$9$个数中选出$4$个，要求其乘积为正数。\n\\begin{enumerate}[label={\\rm (\\arabic*)}]\n\\item 若选择的数字互不相同，求方案数；\n\\item 若选择的数字允许相同，求方案数。\n\\end{enumerate}",
    "answers": {
      "(1)": [
        {
          "answer": "分类讨论：\n- 4正0负：$1$\n- 2正2负：$\\binom{5}{2}\\times\\binom{4}{2}=60$\n- 0正4负：$\\binom{5}{4}=5$\n- 共66种",
          "rules": [
            {
              "rule": "4正0负：$1$",
              "score": 1
            },
            {
              "rule": "2正2负：$\\binom{5}{2}\\times\\binom{4}{2}=60$",
              "score": 2
            },
            {
              "rule": "0正4负：$\\binom{5}{4}=5$",
              "score": 1
            },
            {
              "rule": "共66种",
              "score": 1
            }
          ]
        }
      ],
      "(2)": [
        {
          "answer": "分类讨论：\n- 4正0负, $x_1+x_2+x_3+x_4=4$, 可得排列数目为$\\binom{4+4-1}{4-1}=35$\n- 2正2负, 同理可得排列数为$\\binom{2+4-1}{4-1}\\times\\binom{2+5-1}{5-1}=150$\n- 0正4负，同理为$\\binom{5+4-1}{5-1}=70$\n- 共255种",
          "rules": [
            {
              "rule": "4正0负, $x_1+x_2+x_3+x_4=4$, 可得排列数目为$\\binom{4+4-1}{4-1}=35$",
              "score": 1
            },
            {
              "rule": "2正2负, 同理可得排列数为$\\binom{2+4-1}{4-1}\\times\\binom{2+5-1}{5-1}=150$",
              "score": 2
            },
            {
              "rule": "0正4负，同理为$\\binom{5+4-1}{5-1}=70$",
              "score": 1
            },
            {
              "rule": "共255种",
              "score": 1
            }
          ]
        }
      ]
    }
  },
  "1.30": {
    "problem": "求不定方程$xyz = 1\\,000\\,000$的整数解数目。",
    "answers": {
      "(1)": [
        {
          "answer": "首先进行因式分解$1000000=2^6 5^6$。对$x, y, z$进行分解可以得到$x=2^{x_1}5^{x_2}, y=2^{y_1}5^{y_2}, z=2^{z_1}5^{z_2}$，从而有$x_1+y_1+z_1=6, x_2+y_2+z_2=6$。根据不定方程的解我们可以得到解的个数为$(\\binom{6+3-1}{3-1})^2=784$。考虑负数的情况，总的结果乘以4。答案为$(\\binom{6+3-1}{3-1})^2\\times 4=3136$。",
          "rules": [
            {
              "rule": "$1000000=2^6 5^6$",
              "score": 1
            },
            {
              "rule": "对$x,y,z$进行分解可以得到$x=2^{x_1}5^{x_2}, y=2^{y_1}5^{y_2}, z=2^{z_1}5^{z_2}$，从而有$x_1+y_1+z_1=6, x_2+y_2+z_2=6$",
              "score": 4
            },
            {
              "rule": "根据不定方程的解我们可以得到解的个数为$(\\binom{6+3-1}{3-1})^2=784$",
              "score": 2
            },
            {
              "rule": "考虑负数的情况，总的结果乘以4",
              "score": 2
            },
            {
              "rule": "答案为$(\\binom{6+3-1}{3-1})^2\\times 4=3136$",
              "score": 1
            }
          ]
        }
      ]
    }
  },
  "1.31": {
    "problem": "设$n$是正整数，证明：$\\sum_{k = 1}^n \\frac{k \\cdot P(n, k)}{n^{k+1}} = 1$。",
    "answers": {
      "(1)": [
        {
          "answer": "$n^{k+1}$表示$n$种不同的球放入$k+1$个盒子，且每个盒子只能放一个球的不同放法数量。$kP(n,k)$表示$n$种不同的球放入前$k$个盒子，且每个盒子只能放一个球，且每个盒子中的球的种类不能相同。第$k+1$个盒子中放的球与前面$k$个盒子中的一个相同的放法数量。$\frac{kP(n,k)}{n^{k+1}}$表示的是在$n+1$个盒子中放球，第$k+1$个盒子中的球恰为第一次出现重复种类的球的概率。由鸽巢原理，$n+1$个盒子中放$n$个种类的球，一定有两个盒子的球是同一种类，所以该概率之和为$1$。",
          "rules": [
            {
              "rule": "$n^{k+1}$表示$n$种不同的球放入$k+1$个盒子，且每个盒子只能放一个球的不同放法数量",
              "score": 2
            },
            {
              "rule": "$kP(n,k)$表示$n$种不同的球放入前$k$个盒子，且每个盒子只能放一个球，且每个盒子中的球的种类不能相同。第$k+1$个盒子中放的球与前面$k$个盒子中的一个相同的放法数量",
              "score": 2
            },
            {
              "rule": "$\\frac{kP(n,k)}{n^{k+1}}$表示的是在$n+1$个盒子中放球，第$k+1$个盒子中的球恰为第一次出现重复种类的球的概率",
              "score": 2
            },
            {
              "rule": "由鸽巢原理，$n+1$个盒子中放$n$个种类的球，一定有两个盒子的球是同一种类，所以该概率之和为$1$",
              "score": 4
            }
          ]
        }
      ]
    }
  },
  "1.32": {
    "problem": "设$a_1 a_2 \\cdots a_n$是$\\left\\{ 1, 2, \\cdots, n \\right\\}$的一个排列，我们将排在$a_i$后面且比$a_i$小的数的个数称为$a_i$的中介数。例如，对于排列$364521$，$4$的中介数为$2$。求$\\left\\{ 1, 2, \\cdots, 8 \\right\\}$的所有排列中，满足$8$的中介数为$2$、$7$的中介数为$3$、$5$的中介数为$3$的排列方案数。",
    "answers": {
      "(1)": [
        {
          "answer": "考虑5若在7后面，那么7的中介数严格大于5的中介数，矛盾，故5在7前面；同理，7在8前面。7和8之间有1个数，8后面有2个数。分类讨论得结果为$144$种。",
          "rules": [
            {
              "rule": "考虑5若在7后面，那么7的中介数严格大于5的中介数，矛盾，故5在7前面；同理，7在8前面",
              "score": 4
            },
            {
              "rule": "7和8之间有1个数，8后面有2个数",
              "score": 1
            },
            {
              "rule": "分类讨论得结果为$144$种",
              "score": 5
            }
          ]
        }
      ]
    }
  },
  "1.33": {
    "problem": "有$m$个不同的盒子，将$r$个相同的小球放入其中的$n$个盒子中，要求这$n$个盒子互不相邻且每盒至少包含$k$个球（$r \\geq nk, \\; m \\geq 2n - 1$）。求满足要求的放球方案数。",
    "answers": {
      "(1)": [
        {
          "answer": "转化为不定方程求解，$m$个盒子选$n$个不相邻的方案数为$\\binom{m-n+1}{n}$。$y_1 + y_2 + \\dots + y_n = r, y_i\\geq k, i = 1,2,\\dots, n$，方案数为$\\binom{m-n+1}{n}\\binom{r-nk+n-1}{n-1}$。两者独立，乘法原理得$\\binom{m-n+1}{n}\\binom{r-nk+n-1}{n-1}$。",
          "rules": [
            {
              "rule": "转化为不定方程求解，$m$个盒子选$n$个不相邻的方案数为$\\binom{m-n+1}{n}$",
              "score": 5
            },
            {
              "rule": "$y_1 + y_2 + \\dots + y_n = r, y_i\\geq k, i = 1,2,\\dots, n$，方案数为$\\binom{m-n+1}{n}\\binom{r-nk+n-1}{n-1}$",
              "score": 4
            },
            {
              "rule": "两者独立，乘法原理得$\\binom{m-n+1}{n}\\binom{r-nk+n-1}{n-1}$",
              "score": 1
            }
          ]
        }
      ]
    }
  },
  "1.34": {
    "problem": "有$n$个小写英文字母，其中第$k$种字母的出现次数为$a_k$，保证$\\sum_{k = 1}^{26} a_k = n$。现使用这些字母组成一个字符串，要求不能为回文串（即逆序后与原串相同的字符串）。通过讨论各$a_i$的奇偶性，求符合要求的字符串数目。",
    "answers": {
      "(1)": [
        {
          "answer": "所有字符串数量为$ U = \\frac{n!}{a_1!a_2!\\dots a_{26}!}$。我们只需要求出回文串的数量然后减去即可，这里需要分类讨论$a_i(i=1,2,\\dots,26)$中奇数的数量。$a_i$有超过一个奇数，显然无法构成回文串,$L=0$。$a_i$恰好有一个奇数，我们假设序号为$a_w$，那么中间那个字母一定是第$w$个字母，从而前面$\\frac{n-1}{2}$个字符串决定了回文串数量$L=\\frac{(\\frac{n-1}{2})!}{(\\frac{a_w-1}{2})!{\\Pi_{j=1,j\\neq w}^{26}(\\frac{a_j}{2})!}}$。$a_i$中没有奇数，根据前$\\frac{n}{2}$个字母构建回文串，回文串数量为$L=\\frac{(\\frac{n}{2})!}{{\\Pi_{j=1}^{26}(\\frac{a_j}{2})!}}$",
          "rules": [
            {
              "rule": "所有字符串数量为$ U = \\frac{n!}{a_1!a_2!\\dots a_{26}!}$",
              "score": 1
            },
            {
              "rule": "$a_i$有超过一个奇数，显然无法构成回文串,$L=0$",
              "score": 3
            },
            {
              "rule": "$a_i$恰好有一个奇数，我们假设序号为$a_w$，那么中间那个字母一定是第$w$个字母，从而前面$\\frac{n-1}{2}$个字符串决定了回文串数量$L=\\frac{(\\frac{n-1}{2})!}{(\\frac{a_w-1}{2})!{\\Pi_{j=1,j\\neq w}^{26}(\\frac{a_j}{2})!}}$",
              "score": 3
            },
            {
              "rule": "$a_i$中没有奇数，根据前$\\frac{n}{2}$个字母构建回文串，回文串数量为$L=\\frac{(\\frac{n}{2})!}{{\\Pi_{j=1}^{26}(\\frac{a_j}{2})!}}$",
              "score": 3
            }
          ]
        }
      ]
    }
  },
  "1.35": {
    "problem": "若将一个三阶魔方的角块和棱块全部拆下，然后再随机拼回，则魔方能复原的概率为$\\frac{1}{12}$。根据这一条件，求三阶魔方的合法状态（即能复原的状态）数目。",
    "answers": {
      "(1)": [
        {
          "answer": "注意到一个三阶魔方共有8个角块和12个棱块。每个棱块有2个方向。每个角块有3个方向。总共的状态数为$8!\\times 3^8\\times 12!\\times 2^{12}$。这里面的状态只有$\\frac{1}{12}$的概率能够复原，因此合法状态数目为$\\frac{1}{12}\\times 8!\\times 3^8\\times 12!\\times 2^{12}$。",
          "rules": [
            {
              "rule": "注意到一个三阶魔方共有8个角块和12个棱块。",
              "score": 1
            },
            {
              "rule": "每个棱块有2个方向。",
              "score": 1
            },
            {
              "rule": "每个角块有3个方向。",
              "score": 1
            },
            {
              "rule": "总共的状态数为$8!\\times 3^8\\times 12!\\times 2^{12}$。",
              "score": 4
            },
            {
              "rule": "这里面的状态只有$\\frac{1}{12}$的概率能够复原，因此合法状态数目为$\\frac{1}{12}\\times 8!\\times 3^8\\times 12!\\times 2^{12}$。",
              "score": 2
            }
          ]
        }
      ]
    }
  },
  "1.36": {
    "problem": "某份试卷中有一道包含四个选项$A, B, C, D$的选择题，共有$147$位同学交卷。现需要统计选择了每个选项的同学人数。例如，统计结果可能是$\\left\\{ A: 100, \\; B: 0, \\; C: 42, \\; D: 5 \\right\\}$。求可能出现的统计结果数目。",
    "answers": {
      "(1)": [
        {
          "answer": "假设A，B，C，D四个选项的作答人数分别是$x_1,x_2,x_3,x_4$，那么我们有$x_1+x_2+x_3+x_4=147,x_i\\geq 0,i=1,2,3,4$，所以解的个数为$\\binom{147+4-1}{4-1}=\\binom{150}{3}$",
          "rules": [
            {
              "rule": "假设A，B，C，D四个选项的作答人数分别是$x_1,x_2,x_3,x_4$，那么我们有$x_1+x_2+x_3+x_4=147,x_i\\geq 0,i=1,2,3,4$，所以解的个数为$\\binom{147+4-1}{4-1}=\\binom{150}{3}$",
              "score": 3
            }
          ]
        }
      ],
      "(2)": [
        {
          "answer": "假设A，B，C，D四个选项的作答人数分别是$x_1,x_2,x_3,x_4$，那么我们有$x_1+x_2+x_3+x_4\\leq 147,x_i\\geq 0,i=1,2,3,4$，我们引入$x_5=147-x_1-x_2-x_3-x_4\\geq 0$，从而我们转化成$x_1+x_2+x_3+x_4+x_5=147,x_i\\geq 0,i=1,2,3,4,5$，从而结果为$\\binom{147+5-1}{5-1}=\\binom{151}{4}$",
          "rules": [
            {
              "rule": "假设A，B，C，D四个选项的作答人数分别是$x_1,x_2,x_3,x_4$，那么我们有$x_1+x_2+x_3+x_4\\leq 147,x_i\\geq 0,i=1,2,3,4$，我们引入$x_5=147-x_1-x_2-x_3-x_4\\geq 0$，从而我们转化成$x_1+x_2+x_3+x_4+x_5=147,x_i\\geq 0,i=1,2,3,4,5$，从而结果为$\\binom{147+5-1}{5-1}=\\binom{151}{4}$",
              "score": 3
            }
          ]
        }
      ],
      "(3)": [
        {
          "answer": "同理我们转化该问题$x_1+x_2+x_3+x_4\\leq 147, x_1\\geq 0, x_2\\geq 0, x3\\geq 74, x_4\\geq 0$，引入$x5 = 147-x_1-x_2-x_3-x_4\\geq 0$，稍作处理可以得到$x_1+x_2+(x_3-74)+x_4+x_5=73,x_1\\geq 0, x_2\\geq 0,x_3-74\\geq 0, x_4\\geq 0,x_5\\geq 0$。根据不定方程解的个数可以容易得到解的数目为$\\binom{73+5-1}{5-1}=\\binom{77}{4}$",
          "rules": [
            {
              "rule": "同理我们转化该问题$x_1+x_2+x_3+x_4\\leq 147, x_1\\geq 0, x_2\\geq 0, x3\\geq 74, x_4\\geq 0$，引入$x5 = 147-x_1-x_2-x_3-x_4\\geq 0$，稍作处理可以得到$x_1+x_2+(x_3-74)+x_4+x_5=73,x_1\\geq 0, x_2\\geq 0,x_3-74\\geq 0, x_4\\geq 0,x_5\\geq 0$。根据不定方程解的个数可以容易得到解的数目为$\\binom{73+5-1}{5-1}=\\binom{77}{4}$",
              "score": 4
            }
          ]
        }
      ]
    }
  }
}